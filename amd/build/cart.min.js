define ("local_shopping_cart/cart",["exports","core/ajax"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.addItem=a.deleteItem=a.init=a.buttoninit=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);a.buttoninit=function buttoninit(a,b){console.log("initialized",a,b);var c=document.querySelector("#btn-"+a);c.querySelector(".loadJavascript").remove();var d=c.querySelector("span");if(d){d.classList.remove("hidden")}c.addEventListener("click",function(c){c.preventDefault();c.stopPropagation();g(a,b)})};a.init=function init(){document.querySelectorAll(".shopping-cart-items [id^=item]").forEach(function(a){console.log(a.dataset.expirationdate+" asd a"+a.dataset.id);e(a.dataset.expirationdate,a.dataset.id)});document.querySelectorAll(".fa-trash-o").forEach(function(a){c(a)});document.querySelector("#nav-shopping_cart-popover-container .btn-primary.addrandom").addEventListener("click",function(a){a.preventDefault();a.stopPropagation();g()})};var f=function(a){b.default.call([{methodname:"local_shopping_cart_delete_item",args:{id:a},done:function done(){console.log(a);var b=document.querySelector("#item-"+a);if(b){b.remove();var c=document.getElementById("countbadge"),d=document.getElementById("itemcount");c.innerHTML=0<c.innerHTML?c.innerHTML-=1:c.innerHTML;d.innerHTML=0<d.innerHTML?d.innerHTML-=1:c.innerHTML;d.innerHTML=0==d.innerHTML?d.classList.add("hidden"):d.innerHTML;var e=b.dataset.price,f=document.getElementById("totalprice");f="undefined"==f?0:f;f.innerHTML-=e}},fail:function fail(b){console.log(a,b);var c=document.querySelector("#item-"+a);if(c){c.remove();var d=document.getElementById("countbadge"),e=document.getElementById("itemcount");d.innerHTML=0<d.innerHTML?d.innerHTML-=1:d.innerHTML;e.innerHTML=0<e.innerHTML?e.innerHTML-=1:d.innerHTML;e.innerHTML=0==e.innerHTML?e.classList.add("hidden"):e.innerHTML;var f=c.dataset.price,g=document.getElementById("totalprice");g="undefined"==g?0:g;g.innerHTML-=f}}}])};a.deleteItem=f;var g=function(a,d){b.default.call([{methodname:"local_shopping_cart_add_item",args:{component:d,itemid:a},done:function done(a){var b="<li id=\"item-"+a.itemid+"\" class=\"clearfix\" data-price=\""+a.price+"\" data-name=\""+a.itemname+"\"><span class=\"item-name\"><i class=\"fa fa-futbol-o\" aria-hidden=\"true\"></i>"+a.itemname+"</span><span class=\"item-price pull-right\">"+a.price+"\u20AC</span><br><span class=\"item-time pl-3\">[<span id=\"time-item-"+a.itemid+"\"></span>]</span><span class=\"pull-right\"><i class=\"fa fa-trash-o lighter-text\" data-id=\"item-"+a.itemid+"\"></i></span></li>",d=document.getElementById("litotalprice");d.insertAdjacentHTML("beforeBegin",b);document.getElementById("countbadge").innerHTML++;document.getElementById("itemcount").innerHTML++;var f=document.getElementById("totalprice");f.innerHTML=parseInt(f.innerHTML)+parseInt(a.price);c(document.querySelector("#item-"+a.itemid+" .fa-trash-o"));e(a.expirationdate,a.itemid)},fail:function fail(a){console.log("error",a)}}],!0)};a.addItem=g;function c(a){a.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();var c=a.dataset.id.split("-").pop();f(c)})}function d(a,b,c){var d=a,e,g;setInterval(function(){e=parseInt(d/60,10);g=parseInt(d%60,10);e=10>e?"0"+e:e;g=10>g?"0"+g:g;b.textContent=e+":"+g;if(0>--d){d=0;f(c)}},1e3)}function e(a,b){var c=0,e=Date.now("UTC");e=new Date().getTime()/1e3;c=a-e;if(0>c){c=0}var f=document.querySelector("#time-item-"+b);if(f){d(c,f,b)}}});
//# sourceMappingURL=cart.min.js.map
