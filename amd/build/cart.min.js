define ("local_shopping_cart/cart",["exports","core/ajax"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.addItem=a.deleteItem=a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);a.init=function init(){document.querySelectorAll(".shopping-cart-items [id^=item]").forEach(function(a){console.log(a.dataset.expirationdate+" asd a"+a.dataset.id);e(a.dataset.expirationdate,a.dataset.id)});document.querySelectorAll(".fa-trash-o").forEach(function(a){c(a)});document.querySelector("#nav-shopping_cart-popover-container .btn-primary.addrandom").addEventListener("click",function(a){a.preventDefault();a.stopPropagation();g()})};var f=function(a){b.default.call([{methodname:"local_shopping_cart_delete_item",args:{id:a},done:function done(){console.log(a);var b=document.querySelector("#item-"+a);if(b){b.remove();var c=document.getElementById("countbadge"),d=document.getElementById("itemcount");0<c.innerHTML?c.innerHTML-=1:c.innerHTML;0<d.innerHTML?d.innerHTML-=1:c.innerHTML;0==d.innerHTML?d.classList.add("hidden"):d.innerHTML;var e=b.dataset.price,f=document.getElementById("totalprice");"undefined"==f?0:f;f.innerHTML-=e}},fail:function fail(){console.log(a);var b=document.querySelector("#item-"+a);if(b){b.remove();var c=document.getElementById("countbadge"),d=document.getElementById("itemcount");0<c.innerHTML?c.innerHTML-=1:c.innerHTML;0<d.innerHTML?d.innerHTML-=1:c.innerHTML;0==d.innerHTML?d.classList.add("hidden"):d.innerHTML;var e=b.dataset.price,f=document.getElementById("totalprice");"undefined"==f?0:f;f.innerHTML-=e}}}])};a.deleteItem=f;var g=function(){b.default.call([{methodname:"local_shopping_cart_add_item",args:{id:"1"},done:function done(a){var b="<li id=\"item-"+a.id+"\" class=\"clearfix\" data-price=\""+a.price+"\" data-name=\""+a.name+"\" data-expirationdate=\""+a.expirationdate+"\" data-id=\""+a.id+"\"><span class=\"item-name\"><i class=\"fa fa-futbol-o\" aria-hidden=\"true\"></i>"+a.name+"</span><span class=\"item-price pull-right\">"+a.price+"\u20AC</span><br><span class=\"item-time pl-3\">[<span id=\"time-item-"+a.id+"\"></span>]</span><span class=\"pull-right\"><i class=\"fa fa-trash-o lighter-text\" data-id=\"item-"+a.id+"\"></i></span></li>",d=document.getElementById("litotalprice");d.insertAdjacentHTML("beforeBegin",b);var f=document.getElementById("countbadge"),g=document.getElementById("itemcount");g.classList.remove("hidden");f.innerHTML++;g.innerHTML++;var h=document.getElementById("totalprice");h.innerHTML=(parseInt(total.innerHTML)||0)+parseInt(a.price);c(document.querySelector("#item-"+a.id+" .fa-trash-o"));e(a.expirationdate,a.id)},fail:function fail(){}}],!0)};a.addItem=g;function c(a){a.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();var c=a.dataset.id.split("-").pop();f(c)})}function d(a,b,c){var d=a,e,g;setInterval(function(){e=parseInt(d/60,10);g=parseInt(d%60,10);e=10>e?"0"+e:e;g=10>g?"0"+g:g;b.textContent=e+":"+g;if(0>--d){d=0;f(c)}},1e3)}function e(a,b){var c=0,e=Date.now("UTC");e=new Date().getTime()/1e3;c=a-e;if(0>c)c=0;var f=document.querySelector("#time-item-"+b);if(f)d(c,f,b)}});
//# sourceMappingURL=cart.min.js.map
