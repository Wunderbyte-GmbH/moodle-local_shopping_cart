define("local_shopping_cart/form_users_selector",["exports","core/ajax","core/templates"],(function(_exports,_ajax,_templates){var obj;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _transport(){return(_transport=_asyncToGenerator(regeneratorRuntime.mark((function _callee(selector,query,callback,failure){var request,response,labels;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return request={methodname:"local_shopping_cart_search_users",args:{query:query}},_context.prev=1,_context.next=4,_ajax.default.call([request])[0];case 4:if(response=_context.sent,labels=[],console.log(response),!(response.warnings.length>0)){_context.next=11;break}callback(response.warnings),_context.next=17;break;case 11:return response.list.forEach((function(user){labels.push((0,_templates.render)("local_shopping_cart/form-user-selector-suggestion",user))})),_context.next=14,Promise.all(labels);case 14:labels=_context.sent,response.list.forEach((function(entity,index){entity.label=labels[index]})),callback(response.list);case 17:_context.next=22;break;case 19:_context.prev=19,_context.t0=_context.catch(1),failure(_context.t0);case 22:case"end":return _context.stop()}}),_callee,null,[[1,19]])})))).apply(this,arguments)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.processResults=function(selector,results){return Array.isArray(results)?results.map((function(result){return{value:result.id,label:result.label}})):results},_exports.transport=function(_x,_x2,_x3,_x4){return _transport.apply(this,arguments)},_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj}}));

//# sourceMappingURL=form_users_selector.min.js.map