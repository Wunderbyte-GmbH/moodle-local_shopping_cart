{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_shopping_cart/item_price

    This template will render the price info for a item

    Classes required for JS:
    * none

    Data attributes required for JS:
    * All data attributes are required

    Context variables required for this template:
    * userid the logged in user id
    * urls The URLs for the popover

    Example context (json):
    {
        "structuredhistoryitems": [
            "dateintervalkey": "06_2025_08_2025",
            "dateinterval": "06/2025 - 08/2025",
            "sectionhistoryitems": [{
                "id":"2",
                "userid":"2309",
                "itemid":"1",
                "itemname":"my test item 1",
                "price":"10.00",
                "tax":"2.00",
                "discount":"0.00",
                "currency":"EUR",
                "componentname":"local_shopping_cart",
                "identifier":"1668028796",
                "payment":"3",
                "paymentstatus":"2",
                "usermodified":"2",
                "timecreated":"1668028796",
                "timemodified":"1668028796",
                "canceluntil":"1669238377",
                "serviceperiodstart":"0",
                "serviceperiodend":"0",
                "gateway":null,
                "date":"2022-11-09",
                "canceled":false,
                "canceluntilstring":"2022-11-23",
                "canceluntilalert":"Stornieren ist nicht m\u00f6glich.",
                "buttonclass":"disabled hidden",
                "paymentstring":"in bar an der Kassa",
                "receipturl":"https://www.wunderbyte.at/"
            }]
        ]
    }
}}
{{^structuredhistoryitems}}
    {{#historyitems}}
    {{> local_shopping_cart/history_item }}
    {{/historyitems}}
{{/structuredhistoryitems}}
{{#structuredhistoryitems}}
<div id="shoppingcarthistory-accordion">
    <div class="card rounded-0">
        <div class="card-header rounded-0 border-0" id="heading-{{dateintervalkey}}" data-toggle="collapse" data-target="#collapse-{{dateintervalkey}}" aria-expanded="true" aria-controls="collapse-{{dateintervalkey}}">
            <div class="shoppingcarthistory-accordion-header-text btn btn-link">
                {{dateinterval}}
            </div>
        </div>
        <div id="collapse-{{dateintervalkey}}" class="collapse {{#firstsection}}show{{/firstsection}}" aria-labelledby="heading-{{dateintervalkey}}" data-parent="#shoppingcarthistory-accordion">
            <div class="card-body">
                {{#sectionhistoryitems}}
                {{> local_shopping_cart/history_item }}
                {{/sectionhistoryitems}}
            </div>
        </div>
    </div>
</div>
{{/structuredhistoryitems}}
